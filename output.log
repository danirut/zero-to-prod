
running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s


running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s


running 1 test
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.240917504Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","rows_affected":0,"db.statement":"","summary":"CREATE DATABASE \"ce9ea531-f22a-4e06-8f49-edac9bb7055b\";","rows_returned":0,"elapsed":"18.739633ms","elapsed_secs":0.018739633}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.270851307Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed_secs":0.000363257,"elapsed":"363.257µs","summary":"SELECT current_database()","rows_returned":1,"db.statement":"","rows_affected":0}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.271212893Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","summary":"SELECT pg_advisory_lock($1)","elapsed_secs":0.000259431,"db.statement":"","rows_returned":1,"rows_affected":1,"elapsed":"259.431µs"}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.275369155Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed_secs":0.002153132,"rows_affected":0,"db.statement":"\n\nCREATE TABLE IF NOT EXISTS _sqlx_migrations (\n  version BIGINT PRIMARY KEY,\n  description TEXT NOT NULL,\n  installed_on TIMESTAMPTZ NOT NULL DEFAULT now(),\n  success BOOLEAN NOT NULL,\n  checksum BYTEA NOT NULL,\n  execution_time BIGINT NOT NULL\n);\n","elapsed":"2.153132ms","summary":"CREATE TABLE IF NOT …","rows_returned":0}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.276523256Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed_secs":0.000609027,"summary":"SELECT version FROM _sqlx_migrations …","rows_affected":0,"rows_returned":0,"db.statement":"\n\nSELECT\n  version\nFROM\n  _sqlx_migrations\nWHERE\n  success = false\nORDER BY\n  version\nLIMIT\n  1\n","elapsed":"609.027µs"}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.27713367Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed_secs":0.000193184,"rows_affected":0,"db.statement":"\n\nSELECT\n  version,\n  checksum\nFROM\n  _sqlx_migrations\nORDER BY\n  version\n","rows_returned":0,"summary":"SELECT version, checksum FROM …","elapsed":"193.184µs"}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.27977417Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","db.statement":"\n\n-- Add migration script here\n-- Create Subscriptions Table\nCREATE TABLE subscriptions(\n  id uuid NOT NULL,\n  PRIMARY KEY (id),\n  email TEXT NOT NULL UNIQUE,\n  name TEXT NOT NULL,\n  subscribed_at timestamptz NOT NULL\n);\n","rows_affected":0,"summary":"-- Add migration script …","elapsed":"1.027208ms","rows_returned":0,"elapsed_secs":0.001027208}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.281313285Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed_secs":0.000363191,"db.statement":"\n\nINSERT INTO\n  _sqlx_migrations (\n    version,\n    description,\n    success,\n    checksum,\n    execution_time\n  )\nVALUES\n  ($1, $2, TRUE, $3, -1)\n","summary":"INSERT INTO _sqlx_migrations ( …","rows_affected":1,"rows_returned":0,"elapsed":"363.191µs"}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.281831641Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed":"448.023µs","rows_affected":0,"rows_returned":0,"summary":"COMMIT","db.statement":"","elapsed_secs":0.000448023}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.283169132Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed":"775.933µs","elapsed_secs":0.000775933,"rows_affected":1,"summary":"UPDATE _sqlx_migrations SET execution_time …","db.statement":"\n\nUPDATE\n  _sqlx_migrations\nSET\n  execution_time = $1\nWHERE\n  version = $2\n","rows_returned":0}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.283317236Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","db.statement":"","elapsed":"89.797µs","elapsed_secs":0.000089797,"rows_affected":0,"rows_returned":1,"summary":"SELECT current_database()"}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.283569077Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed_secs":0.000193101,"rows_affected":1,"elapsed":"193.101µs","rows_returned":1,"summary":"SELECT pg_advisory_unlock($1)","db.statement":""}
{"v":0,"name":"test","msg":"connecting to 127.0.0.1:33263","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.318949832Z","target":"hyper_util::client::legacy::connect::http","line":643,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/hyper-util-0.1.6/src/client/legacy/connect/http.rs"}
{"v":0,"name":"test","msg":"Starting zero-to-prod","level":30,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.319322807Z","target":"zero_to_prod","line":49,"file":"src/lib.rs"}
{"v":0,"name":"test","msg":"connected to 127.0.0.1:33263","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.319440783Z","target":"hyper_util::client::legacy::connect::http","line":646,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/hyper-util-0.1.6/src/client/legacy/connect/http.rs"}
{"v":0,"name":"test","msg":"[ADDING A NEW SUBSCRIBER - START]","level":30,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.319988204Z","target":"zero_to_prod::routes::subscriptions","line":14,"file":"src/routes/subscriptions.rs","subscriber_email":"mail@marszy.com","subscriber_name":"marcin","request_id":"6edc9412-7d40-49b1-aee0-aad7ca02f4fd"}
{"v":0,"name":"test","msg":"[ADDING A NEW SUBSCRIBER - EVENT] Saving new subscriber details in the database","level":30,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.320033666Z","target":"zero_to_prod::routes::subscriptions","line":27,"file":"src/routes/subscriptions.rs","subscriber_email":"mail@marszy.com","subscriber_name":"marcin","request_id":"6edc9412-7d40-49b1-aee0-aad7ca02f4fd"}
{"v":0,"name":"test","msg":"[SAVING NEW SUBSCRIBER DETAILS IN THE DATABASE - START]","level":30,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.32008518Z","target":"zero_to_prod::routes::subscriptions","line":33,"file":"src/routes/subscriptions.rs","subscriber_email":"mail@marszy.com","subscriber_name":"marcin","request_id":"6edc9412-7d40-49b1-aee0-aad7ca02f4fd"}
{"v":0,"name":"test","msg":"[SAVING NEW SUBSCRIBER DETAILS IN THE DATABASE - EVENT] sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.322115872Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","rows_returned":0,"elapsed":"833.682µs","elapsed_secs":0.000833682,"summary":"INSERT INTO subscriptions (id, …","rows_affected":1,"db.statement":"\n\nINSERT INTO\n  subscriptions (id, email, name, subscribed_at)\nVALUES\n  ($1, $2, $3, $4)\n","subscriber_email":"mail@marszy.com","subscriber_name":"marcin","request_id":"6edc9412-7d40-49b1-aee0-aad7ca02f4fd"}
{"v":0,"name":"test","msg":"[SAVING NEW SUBSCRIBER DETAILS IN THE DATABASE - EVENT] New subscriber mail@marszy.com saved","level":30,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.322189594Z","target":"zero_to_prod::routes::subscriptions","line":54,"file":"src/routes/subscriptions.rs","subscriber_email":"mail@marszy.com","subscriber_name":"marcin","request_id":"6edc9412-7d40-49b1-aee0-aad7ca02f4fd"}
{"v":0,"name":"test","msg":"[SAVING NEW SUBSCRIBER DETAILS IN THE DATABASE - END]","level":30,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.32222775Z","target":"zero_to_prod::routes::subscriptions","line":33,"file":"src/routes/subscriptions.rs","request_id":"6edc9412-7d40-49b1-aee0-aad7ca02f4fd","subscriber_name":"marcin","elapsed_milliseconds":2,"subscriber_email":"mail@marszy.com"}
{"v":0,"name":"test","msg":"[ADDING A NEW SUBSCRIBER - END]","level":30,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.322263663Z","target":"zero_to_prod::routes::subscriptions","line":14,"file":"src/routes/subscriptions.rs","request_id":"6edc9412-7d40-49b1-aee0-aad7ca02f4fd","subscriber_name":"marcin","elapsed_milliseconds":2,"subscriber_email":"mail@marszy.com"}
{"v":0,"name":"test","msg":"pooling idle connection for (\"http\", 127.0.0.1:33263)","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.322428516Z","target":"hyper_util::client::legacy::pool","line":396,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/hyper-util-0.1.6/src/client/legacy/pool.rs"}
{"v":0,"name":"test","msg":"sqlx::query","level":20,"hostname":"jan-HP-ENVY-x360-Convertible-13-bd0xxx","pid":49834,"time":"2024-10-16T16:34:39.350223361Z","target":"sqlx::query","line":138,"file":"/home/janol/.cargo/registry/src/index.crates.io-6f17d22bba15001f/sqlx-core-0.7.4/src/logger.rs","elapsed_secs":0.000646083,"rows_returned":1,"rows_affected":0,"summary":"SELECT email, name FROM …","db.statement":"\n\nSELECT\n  email,\n  name\nFROM\n  subscriptions\n","elapsed":"646.083µs"}
test subscribe_returns_a_200_for_valid_form_data ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 2 filtered out; finished in 0.17s

